# vi: set ft=conf
# add key to admin
soft user add-pubkey admin "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPjUeXhBzj18/WZbqcD1aPJlCALzBMMZxhpaU45KgVqL"
soft user info admin
soft info
cmp stdout info.txt


# list admin pubkeys
soft pubkey list
cmp stdout admin_key_list1.txt

# remove key
soft pubkey remove "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPjUeXhBzj18/WZbqcD1aPJlCALzBMMZxhpaU45KgVqL"
soft pubkey list
cmp stdout admin_key_list2.txt

# add key back key
soft pubkey add "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPjUeXhBzj18/WZbqcD1aPJlCALzBMMZxhpaU45KgVqL"
soft pubkey list
cmp stdout admin_key_list1.txt


# list users
soft user list
cmp stdout list1.txt


# create a new user
soft user create foo --key "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzXnhJ/6SrlHZI+DnTb1n/0KL6/VOQTea8qLovTiZix"
soft user list
cmp stdout list2.txt


# get new user info
soft user info foo
cmp stdout foo_info1.txt


# make user admin
soft user set-admin foo true
soft user info foo
cmp stdout foo_info2.txt


# remove admin
soft user set-admin foo false
soft user info foo
cmp stdout foo_info3.txt


# remove key from user
soft user remove-pubkey foo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzXnhJ/6SrlHZI+DnTb1n/0KL6/VOQTea8qLovTiZix"
soft user info foo
cmp stdout foo_info4.txt

# rename user
soft user set-username foo foo2
soft user info foo2
cmp stdout foo_info5.txt


# remove user
soft user delete foo2
cmp stdout foo_delete.txt
soft user list
cmp stdout list1.txt


-- info.txt --
Username: admin
Admin: true
Public keys:
  ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJI/1tawpdPmzuJcTGTJ+QReqB6cRUdKj4iQIdJUFdrl
  ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPjUeXhBzj18/WZbqcD1aPJlCALzBMMZxhpaU45KgVqL
-- list1.txt --
admin
-- list2.txt --
admin
foo
-- foo_info1.txt --
Username: foo
Admin: false
Public keys:
  ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzXnhJ/6SrlHZI+DnTb1n/0KL6/VOQTea8qLovTiZix
-- foo_info2.txt --
Username: foo
Admin: true
Public keys:
  ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzXnhJ/6SrlHZI+DnTb1n/0KL6/VOQTea8qLovTiZix
-- foo_info3.txt --
Username: foo
Admin: false
Public keys:
  ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAzXnhJ/6SrlHZI+DnTb1n/0KL6/VOQTea8qLovTiZix
-- foo_info4.txt --
Username: foo
Admin: false
Public keys:
-- foo_info5.txt --
Username: foo2
Admin: false
Public keys:
-- admin_key_list1.txt --
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJI/1tawpdPmzuJcTGTJ+QReqB6cRUdKj4iQIdJUFdrl
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPjUeXhBzj18/WZbqcD1aPJlCALzBMMZxhpaU45KgVqL
-- admin_key_list2.txt --
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJI/1tawpdPmzuJcTGTJ+QReqB6cRUdKj4iQIdJUFdrl
-- foo_delete.txt --
